
<style>
.grid-item
{
    padding: 3px;
    background-color:#222;
    border-radius: 10px;
    margin: 3px;
    min-width: 300px;
}
.modalOpenImg
{
    width: 300px;
    height:auto;
    border-radius: 10px;
    border-style: solid;
    border-color: #333;
    margin: auto;
z-index:1005;
}

#modalFoto{
    max-width: 100%;
    max-height: 100%;

}
.modal-body
{
    text-align: center;

}
.modal-dialog
{
  width: 80%;
  height: auto;
  margin: auto;
  padding: 5;

}
.modal-header{
    background-color: rgba(255,255,255,0.8)

}
.modal-content {
  background-color: transparent;
  height: auto;
  min-height: 100%;
  border-radius: 10px;

}

#modalFoto{
    max-width: 100%;
    max-height: 100%;
    min-width: 50vh;
    min-height: 50vh;

}
.sidenav {
    display: none;
    position: fixed;
    height: 100%;
    z-index: 1;
    top: 0;
    right: 0;
    text-align:justify;
    font-size:17px;
    overflow-x: hidden;
    transition:  display 0.5s ease-in-out;
    -moz-transition:  display 0.5s ease-in-out;
    -webkit-transition: display 0.5s ease-in-out;
    -o-transition:  display 0.5s ease-in-out;

}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 25px;

    display: block;
    transition: 0.3s
}

.sidenav a:hover, .offcanvas a:focus{
    color: #f1f1f1;
}


#main {
/*    transition: margin-left .5s;*/
    padding: 16px;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}
</style>
<div class="well w3-padding">
<div class="row">
  <div class="col-md-10 col-md-offset-1 col-sm-12 col-xs-12 well-lg bg-primary text-center" ng-hide="eventPhotos">
    <h1 class="text-center"><i class="fa fa-refresh fa-spin"></i></h1>
  </div>
  <div class="col-xs-12 visible-xs" style="margin-10">
      <h2 class=" w3-center text-primary" ><b>{{event.name | uppercase}}</b></h2>
      <p class="text-capitalize" >
          <i class="fa fa-hand-o-right fa-2x" aria-hidden="true"></i>
          {{event.description}}
      </p>
      <h4 class="text-danger" >
          <i class="fa fa-globe" aria-hidden="true"></i>
          Place:  {{event.place}}
      </h4>
      <h4 class="text-danger" >
          <i class="fa fa-calendar-o" aria-hidden="true"></i>
          Date : {{event.date}}
      </h4>
  </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="page-header">
            <i class="fa fa-flag fa-2x w3-text-theme" style="display:inline-block"></i>
            <h1 class=" w3-text-theme" style="display:inline-block">
                {{event.name}}
            </h1>
        </div>
    </div>
    <div class="wrapper-gallery col-sm-12 col-md-12 hidden-xs" id="wrapper-gal" style="height:auto; text-align:center">
        <div masonry  class="grid w3-container container-fluid w3-center" id="main">
          <div class="masonry-brick " ng-repeat="x in eventPhotos" style="padding:10px">
            <div class="grid-item " >
                <img src="../server/{{x.path}}"  class="modalOpenImg img-responsive" >
            </div>
          </div>
        </div>
    </div>

    <div id="mySidenav" class="sidenav hidden-xs w3-light-grey col-md-0">
        <br><br><br><br><br>
        <div>
            <div class="row">
                <div class="col-md-12">
                    <button href="javascript:void(0)" id="closebtn" onclick="closeNav()" class="btn btn-danger "><i class="fa fa-close fa-2x"></i></button>
                </div>
            </div>
            <h2 class=" w3-center text-primary text-underline" >{{event.name | uppercase}}</h2>
            <p class="text-capitalize w3-padding"><i class="fa fa-hand-o-right fa-2x" aria-hidden="true"></i>{{event.description}}</p>
            <h4 class="text-danger" style="padding-left:10px"><i class="fa fa-globe" aria-hidden="true"></i> Place:  {{event.place}}</h4>
            <h4 class="text-danger" style="padding-left:10px"><i class="fa fa-calendar-o" aria-hidden="true"></i> Date : {{event.date}}</h4>
        </div>
    </div>
</div>
<div class="row">
  <div class="visible-xs">
      <div class="w3-container w3-center col-xs-12" ng-repeat="x in eventPhotos">
        <img src="../server/{{x.path}}" class="img-responsive margin-top-10 img-thumbnail margin-auto">
      </div>
  </div>
</div>




    <div class="hidden-xs" style="position:fixed; top:15%; right:0;">
        <span id="openbtn" style="font-size:25px;cursor:pointer;" onclick="openNav()"><i class="fa fa-toggle-left fa-2x "></i></span>
    </div>


</div>

<div id="modalPicture" class="" style="position:absolute; display:none; left:0; right:0;top:0; bottom:0; background-color:rgba(0,0,0,0.8); height:100%; width:100%; margin-top:-111px; z-index:121">


            <div class="display:table-cell; vertical-align:middle; position:fixed; margin-top:111px;">

                <div class="" style="display:table-cell; width:100vw; height:100vh; text-align:center; vertical-align:middle">
                  <div class="" style="display:inline-block; vertical-align:middle">
                    <div style="display:table-cell; height:100%; width:100%; vertical-align:middle;">
                        <div class="w3-red">
                          <button type="button" id="closeModal" class="close" style="display:block; padding:4px; background-color:rgb(200,10,10); opacity:1; color:white">
                              <span class="fa fa-times" aria-hidden="true"></span>
                              <span class="sr-only">Close</span>
                          </button>
                        </div>
                        <img id='modalFoto' src="assets/images/7.jpg" class="img-responsive" style="max-height:80vh; max-width:80vw; margin:auto; display:inline-block; margin:auto; vertical-align:middle">
                    </div>
                  </div>
                </div>
            </div>
        </div>







<script>
$(document).ready(function() {
    var $gutter;

    if (window.matchMedia("(min-width: 480px)").matches) {
        $gutter = 5;
    } else if (window.matchMedia("(min-width: 768px)").matches) {
        $gutter = 40;
    } else {}

    activateMas($gutter);

    setInterval(function(){activateMas($gutter)},100);

    $("body").on('click','.modalOpenImg',function(){
        if($(window).width() > 768)
        {
            $("#modalFoto").attr('src',$(this).attr('src'));
            console.log($(window).scrollTop());
            if($(window).scrollTop() < $("#navMenu").height()){
              var diff =  $("#navMenu").height() - $(window).scrollTop();
              $("#modalPicture").css({'top':diff});

            }
            else
              $("#modalPicture").css({'top':$(window).scrollTop()});

            $("#modalPicture").show(500);
            disableScroll();
        }
        else{
            console.log($(window).width())
        }
    });
    $("body").on('click',"#closeModal",function(){
      $("#modalPicture").hide(200);
        enableScroll();
    });

});

function activateMas(x){

    $('.grid').masonry({
        itemSelector: '.grid-item',
        gutter: x,
        columnWidth: 1
    });
}

function openNav() {
    $("#wrapper-gal").addClass("col-md-9").addClass("col-sm-6").removeClass("col-md-12").removeClass("col-sm-12");
    $("#mySidenav").removeClass("col-md-0").removeClass("col-sm-0").addClass("col-md-3").addClass("col-sm-6");
    $("#mySidenav").css({'display':'block'});

    document.getElementById("openbtn").style.display="none";
    $("#openbtn").hide();
}

function closeNav() {
    $("#wrapper-gal").removeClass("col-md-9").removeClass("col-sm-6").addClass("col-md-12").addClass("col-sm-12");
    $("#mySidenav").removeClass("col-md-3").removeClass("col-sm-6").addClass("col-md-0").addClass("col-sm-0");
    $("#mySidenav").css({'display':'none'});

    document.getElementById("openbtn").style.display="block";
}


var keys = {37: 1, 38: 1, 39: 1, 40: 1};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault)
      e.preventDefault();
  e.returnValue = false;
}

function preventDefaultForScrollKeys(e) {
    if (keys[e.keyCode]) {
        preventDefault(e);
        return false;
    }
}

function disableScroll() {
  if (window.addEventListener) // older FF
      window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard
  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE
  window.ontouchmove  = preventDefault; // mobile
  document.onkeydown  = preventDefaultForScrollKeys;
}

function enableScroll() {
    if (window.removeEventListener)
        window.removeEventListener('DOMMouseScroll', preventDefault, false);
    window.onmousewheel = document.onmousewheel = null;
    window.onwheel = null;
    window.ontouchmove = null;
    document.onkeydown = null;
}
</script>
